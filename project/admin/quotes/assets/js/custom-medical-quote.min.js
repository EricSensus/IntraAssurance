var Medical={tab:"tab2",addDependantTab:function(e){$(".tab22").removeClass("hide"),$("div#tab22").html(e)},removeDependantTab:function(){$(".tab22").addClass("hide")},generateQuote:function(e){$.ajax({url:e+"/admin/quote/getquote/medical",type:"GET",success:function(a){$(".med").html(a);var t=$(document).find("#input_quote_id").val();console.log(t),$(document).find("#proceed_with_policy").attr("href",e+"/admin/policies/createpolicy/"+t)}})},switchToQuote:function(){$(".med").html($("span#preloader").html()),$(".tab4").removeClass("hide"),$("li > a[href=#tab4]").click()}};$(function(){var e=$("#site_path").val();$(".datepicker").datepicker({dateFormat:"yy-mm-dd",changeYear:!0,changeMonth:!0,maxDate:"-15Y"}),$(document).find("input:radio, input:checkbox").css("display","inline"),$("button[name=btnsubmit], input[name=btnsubmit]").click(function(){a.isFormValid()});var a={isFormValid:function(){var a=!0;if($("input:required,select:required,textarea:required").each(function(){0==$.trim($(this).val()).length||"0.00"==$.trim($(this).val())?($(this).parent().addClass("form-group has-error"),a=!1):$(this).parent().removeClass("has-error")}),a){var t=!1;if(Medical.switchToQuote(),$("form").each(function(){var e=$(this);$.ajax({url:e.attr("action"),type:"POST",data:e.serialize()+"&request_type=__ajax",async:!1,dataType:"json",success:function(e){t=!!e.success}})}),t)return Medical.generateQuote(e),!1}else{var n=$(".has-error:first").parents("div.tab-pane").attr("id");$("a[href=#"+n+"]").click()}}};$("#additional_covers").on("change",function(){var a=$(this),t=parseInt(a.val());t>=1?$.ajax({url:e+"/medical/load/"+t,type:"GET",dataType:"json",success:function(e){e.success&&Medical.addDependantTab(e.form.form)}}):Medical.removeDependantTab()}),$('[data-toggle="popover"]').popover({container:"body"}),$('input[name="core_plans"]').on("click",function(){$('input[name="core_plans"]').each(function(){$(this).parents("div.panel:first").removeClass("highlight-plan")}),$(this).parents("div.panel:first").addClass("highlight-plan")}),$('input[name="have_dependants"]').on("click",function(){Common.makeMandatory($(this).val(),"#additional_covers")}),$('input[name="ever_cover_declined"]').on("click",function(){Common.makeMandatory($(this).val(),"#declined_particulars")}),$('input[name="dependant_claimed_cover"]').on("click",function(){Common.makeMandatory($(this).val(),"#dep_claimed_particulars")});var t={autoFill:function(e){$.each(e,function(e,a){var t=$("[name="+e+"]");t.is(":checkbox")?t.attr("checked","checked"):t.is(":radio")?$("input[name="+e+"][value="+a+"]").attr("checked","checked"):t.val(a)})}};"undefined"!=typeof customer_data&&t.autoFill(customer_data),"undefined"!=typeof product_info&&t.autoFill(product_info);var n=$("#additional_covers").removeAttr("disabled").val();n>=1?$.ajax({url:e+"/medical/load/"+n,type:"GET",dataType:"json",async:!1,success:function(e){e.success&&Medical.addDependantTab(e.form.form)}}):Medical.removeDependantTab(),"undefined"!=typeof entity_data&&t.autoFill(entity_data)});